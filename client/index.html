
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Daily Worklog v4.9.4</title>
    <link rel="icon" type="image/png" href="/favicon.ico" />
    <style>
      :root { --border:#e5e7eb; --muted:#6b7280; --bg:#fff; --text:#111827; --overlay: rgba(17,24,39,.5); }
      * { box-sizing: border-box; }
      body { margin: 0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif; color: var(--text); background: var(--bg); }
      header { display:flex; align-items:center; gap:.75rem; padding:.6rem .9rem; border-bottom:1px solid var(--border); }
      header h1 { font-size:1rem; margin:0; }
      .spacer { flex:1; }
      .topbar { position: sticky; top: 0; z-index: 60; background: #fff; }

      .btn { padding:.35rem .6rem; border:1px solid var(--border); border-radius:6px; background:#fff; cursor:pointer; }
      .btn.active { background:#111827; color:#fff; border-color:#111827; }
      .save-indicator { font-size:.85rem; color: var(--muted); }
      main { height: calc(100vh - 86px); padding:.9rem; }
      /* Make the outline filter sticky below the topbar */
      .status-filter-bar { position: sticky; top: 86px; z-index: 65; background:#fff; display:flex; align-items:center; gap:6px; flex-wrap:wrap; margin-bottom:8px; padding:6px 4px; margin-top:-1px; border-top:1px solid var(--border); box-shadow: 0 1px 0 rgba(229,231,235,1) inset; }
      .status-filter-bar .filter-presets { display:flex; gap:6px; margin-left:12px; }
      .search-bar { display:flex; align-items:center; gap:6px; margin-left:auto; }
      .search-bar input { border:1px solid var(--border); border-radius:999px; padding:0.28rem 0.75rem; font-size:.85rem; min-width:160px; }
      .search-bar button { border:none; background:transparent; color:var(--muted); cursor:pointer; font-size:.8rem; }
      .search-bar button:hover { color:var(--text); }
      .btn.pill { border-radius:999px; padding:0.25rem 0.65rem; font-size:.85rem; }
      .btn.pill.active { background:#111827; color:#fff; border-color:#111827; }
      .btn.ghost { background:transparent; color:var(--muted); }
      .btn.ghost:hover { color:var(--text); }
      .tiptap { border:1px solid var(--border); border-radius:8px; padding:.65rem; padding-bottom:300px; min-height: calc(100vh - 120px); line-height:1.35; }
      .tiptap img { max-width: 100px; max-height: 1.6em; display:inline-block; vertical-align:middle; margin:2px 6px; cursor:pointer; border-radius:4px; }
      .tiptap pre { background:#fff; color:#111827; padding:.75rem; border-radius:6px; overflow:auto; border:1px solid var(--border); position:relative; }
      .tiptap code { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Courier New", monospace; }
      /* Colored filter buttons for status */
      .status-filter-bar .btn.pill[data-status="todo"],
      .status-filter-bar .btn.pill[data-status="todo"].active {
        background:#e5e7eb; border-color:#d1d5db; color:#374151;
      }
      .status-filter-bar .btn.pill[data-status="in-progress"],
      .status-filter-bar .btn.pill[data-status="in-progress"].active {
        background:#FEF3C7; border-color:#FCD34D; color:#92400E;
      }
      .status-filter-bar .btn.pill[data-status="done"],
      .status-filter-bar .btn.pill[data-status="done"].active {
        background:#DCFCE7; border-color:#86EFAC; color:#166534;
      }
      /* Dim (grey out) status filter buttons when not selected, while keeping their colors */
      .status-filter-bar .btn.pill[data-status]:not(.active) { opacity: .55; }


      .tiptap a { color:#2563eb; text-decoration:underline; }
      .tiptap .search-highlight { background:#fef08a; }
      .tiptap .react-renderer.node-listItem { display:list-item; margin:0; padding:0; list-style:none; }
      .tiptap .filter-hidden { display:none !important; }
      .tiptap .filter-parent > .li-row { opacity:0.6; }
      .tiptap ul { margin:0; padding-left:0.3rem; }
      .tiptap ul ul { margin:0; padding-left:0.3rem; }
      .tiptap p { margin:0; line-height:1.18; }
      .li-node { margin:0; list-style:none; }
      .li-row { display:flex; align-items: baseline; gap:2px; margin:0.06rem 0; }
      .li-row .caret { margin-right:1px; }
      .caret.drag-toggle { width:auto; min-width:28px; height:20px; padding:0 4px; display:flex; align-items:center; justify-content:center; gap:2px; cursor:grab; }
      .caret.drag-toggle:active { cursor:grabbing; }
      .caret.drag-toggle .caret-arrow { font-size:10px; line-height:1; }
      .caret.drag-toggle .caret-grip { font-size:12px; line-height:1; color:#9ca3af; margin-left:2px; }
      .li-node.collapsed .li-content ul { display:none; }
      .li-node.collapsed .li-content > :not(:first-child) { display:none; }
      .caret { border:1px solid var(--border); border-radius:4px; width:18px; height:18px; line-height:16px; text-align:center; background:#fff; cursor:pointer; font-size:10px; padding:0; }
      .status-chip.inline { border-radius:999px; width:20px; height:20px; line-height:18px; text-align:center; font-size:12px; border:1px solid var(--border); background:#fff; cursor:pointer; }
      /* status colors */
      .li-node[data-status="todo"] > .li-row > .status-chip.inline { background:#e5e7eb; border-color:#d1d5db; color:#374151; }
      .li-node[data-status="in-progress"] > .li-row > .status-chip.inline { background:#FEF3C7; border-color:#FCD34D; color:#92400E; }
      .li-node[data-status="done"] > .li-row > .status-chip.inline { background:#DCFCE7; border-color:#86EFAC; color:#166534; }
      /* archived dim */
      .li-node[data-archived="1"] > .li-row { opacity:.55; }

      .work-date { background:#DBEAFE; border:1px solid #93C5FD; padding:0 4px; border-radius:4px; }
      .timeline h3 { margin:.75rem 0 .25rem 0; font-size:.95rem; }
      .timeline .item { margin-left:8px; margin-bottom:4px; font-size:.95rem; color:#1f2937; }
      .timeline .status { color:#6b7280; }
      .slash-menu { position:fixed; min-width:220px; background:#fff; border:1px solid var(--border); border-radius:8px; box-shadow:0 10px 32px rgba(15,23,42,.18); z-index:90; padding:10px 8px; display:flex; flex-direction:column; gap:6px; }
      .slash-menu input { width:100%; border:1px solid var(--border); border-radius:6px; padding:6px 8px; font-size:.85rem; }
      .slash-menu button { display:flex; flex-direction:column; align-items:flex-start; width:100%; text-align:left; border:none; background:transparent; padding:6px 8px; border-radius:6px; cursor:pointer; gap:2px; }
      .slash-menu button:hover, .slash-menu button.active { background:rgba(148,163,184,.18); }
      .slash-menu .cmd-label { font-size:.9rem; color:var(--text); }
      .slash-menu .cmd-hint { font-size:.75rem; color:var(--muted); }
      .slash-menu .slash-empty { padding:6px 4px; font-size:.8rem; color:var(--muted); }
      .date-picker-pop { position:fixed; min-width:240px; background:#fff; border:1px solid var(--border); border-radius:8px; box-shadow:0 10px 32px rgba(15,23,42,.18); z-index:95; padding:12px; display:flex; flex-direction:column; gap:8px; }
      .date-picker-title { font-weight:600; font-size:.9rem; }
      .date-picker-actions { display:flex; gap:8px; justify-content:flex-end; }

      .slash-menu .slash-hint { font-size:.72rem; color:var(--muted); }
      .code-copy-btn { position:absolute; top:6px; right:6px; border:none; background:rgba(17,24,39,.08); color:#111827; font-size:.72rem; padding:2px 8px; border-radius:999px; cursor:pointer; transition:background .15s ease, color .15s ease; }
      .code-copy-btn:hover { background:rgba(17,24,39,.16); }
      .code-copy-btn.copied { background:#22c55e; color:#fff; }
      .code-block-wrapper { position:relative; margin:.35rem 0; }
      .code-block-wrapper pre { margin:0; padding-top:2.3rem; }
      .code-block-actions { position:absolute; inset:0 0 auto 0; display:flex; align-items:center; justify-content:space-between; gap:10px; padding:6px 10px; font-size:.7rem; color:var(--muted); background:linear-gradient(180deg, rgba(255,255,255,.94), rgba(255,255,255,0)); pointer-events:none; z-index:1; }
      .code-block-actions button { pointer-events:auto; position:static; }
      .code-block-label { font-weight:600; letter-spacing:.08em; text-transform:uppercase; font-size:.68rem; }
      .code-block-wrapper { position:relative; }
      .debug-pane { position:fixed; bottom:8px; right:8px; width: 420px; max-height: 40vh; overflow:auto; border:1px solid var(--border); background:#fff; border-radius:8px; font-size:12px; padding:6px; z-index:70; }
      .debug-line { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Courier New", monospace; border-bottom:1px dashed #eee; padding:2px 0; white-space:pre-wrap; }
      .image-modal { background:#fff; padding:16px; border-radius:12px; box-shadow:0 16px 48px rgba(15,23,42,.25); display:flex; flex-direction:column; align-items:center; max-width:90vw; max-height:90vh; }
      .image-modal img { max-width:80vw; max-height:70vh; border-radius:8px; }
      .version-banner { display:flex; flex-wrap:wrap; gap:12px; align-items:center; justify-content:flex-end; font-size:.8rem; padding:.35rem .9rem; border-bottom:1px solid var(--border); background:#f9fafb; color:var(--muted); }
      .version-banner span { white-space:nowrap; }
      .history-empty { padding:12px; display:flex; flex-direction:column; gap:4px; color:var(--muted); }
      .meta.error { color:#dc2626; }
      .overlay { position:fixed; inset:0; background:var(--overlay); display:flex; align-items:center; justify-content:center; z-index:80; padding:24px; }
      .modal { background:#fff; border-radius:12px; padding:18px 22px; box-shadow:0 24px 48px rgba(15,23,42,.2); max-width:90vw; max-height:90vh; overflow:auto; }
      .history-day { padding:0 12px 12px; }
      .history-day + .history-day { margin-top:4px; }
      .history-day-toggle { width:100%; display:flex; align-items:center; gap:8px; border:none; background:transparent; padding:8px 10px; border-radius:8px; cursor:pointer; text-align:left; transition:background-color .15s ease; font-weight:600; }
      .history-day-toggle:hover { background:rgba(148,163,184,.14); }
      .history-day-caret { display:inline-block; transition:transform .2s ease; font-size:.85rem; color:#6b7280; }
      .history-day-caret.open { transform:rotate(90deg); }
      .history-day-label { flex:1; }
      .history-day-list { margin-left:26px; display:flex; flex-direction:column; gap:6px; padding:6px 0 4px; }
      .history-item { display:flex; align-items:flex-start; justify-content:space-between; gap:12px; padding:8px 10px; border-radius:8px; cursor:pointer; transition:background-color .15s ease, border-color .15s ease; }
      .history-item:hover { background:rgba(148,163,184,.14); }
      .history-item.active { background:rgba(37,99,235,.12); border-left:3px solid rgba(37,99,235,.6); padding-left:7px; }
      .history-item-actions { display:flex; align-items:center; gap:12px; white-space:nowrap; }
      .btn.xs { padding:0.2rem 0.45rem; font-size:.72rem; }
      .btn.ghost.xs { border-color:transparent; color:var(--muted); }
      .btn.ghost.xs:hover { border-color:var(--border); color:var(--text); }
      .history-inline-preview { border:1px solid var(--border); border-radius:8px; padding:6px; background:#fff; }
      .history-inline-preview .status-filter-bar { position:sticky; top:0; background:#fff; padding-bottom:6px; margin-bottom:6px; z-index:1; }
      .history-inline-preview .tiptap { border:none; min-height:auto; padding:0; }
      .history-inline-preview .tiptap ul { padding-left:0.9rem; }
      .snapshot-fullscreen { position:fixed; inset:0; background:var(--overlay); display:flex; z-index:120; }
      .snapshot-fullscreen-inner { flex:1; display:flex; flex-direction:column; background:#fff; }
      .snapshot-fullscreen-bar { display:flex; align-items:center; justify-content:space-between; padding:14px 22px; border-bottom:1px solid var(--border); background:#f9fafb; }
      .snapshot-fullscreen-title { font-size:1rem; font-weight:600; }
      .snapshot-fullscreen-actions { display:flex; gap:8px; align-items:center; }
      .snapshot-fullscreen-body { flex:1; overflow:auto; padding:20px 28px; }
      .snapshot-fullscreen-body--outline { padding:0; display:flex; flex-direction:column; }
      .snapshot-fullscreen-body--outline > div { flex:1; display:flex; flex-direction:column; }
      .snapshot-fullscreen-body--outline .status-filter-bar { position:sticky; top:0; background:#fff; padding:12px 18px; margin-bottom:0; z-index:2; }
      .snapshot-fullscreen-body--outline .tiptap { flex:1; border:none; border-top:1px solid var(--border); border-radius:0; min-height:auto; padding:18px; }
      .snapshot-fullscreen-body--outline .tiptap ul { padding-left:1.1rem; }
      .li-content .li-row { margin-left: -24px; }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
